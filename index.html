<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Merus API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","javascript"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Merus API dcoumentation.</p>

<p>Sample code is available in shell and JavaScript.</p>

<h1 id="authentication">Authentication</h1>

<h2 id="oauth">OAuth</h2>

<p>The Merus API uses OAuth 2.0 to provide third party apps with access to users&rsquo; accounts without directly requiring their password.</p>

<p>Accessing most endpoints requires an OAuth access token.</p>

<p>In order to use OAuth, you must <a href="#apps">register an app</a> with the API. This will provide an app id and key which can be used to authenticate users.</p>

<ol>
<li><p>Redirect users to request access:</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET https://api.meruscase.com/auth/authorize</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">client_id</code></td>
<td>integer</td>
<td><strong>Required</strong> The app&rsquo;s id</td>
</tr>
<tr>
<td><code class="prettyprint">redirect_uri</code></td>
<td>string</td>
<td><strong>Required</strong> The app&rsquo;s callback URL</td>
</tr>
<tr>
<td><code class="prettyprint">response_type</code></td>
<td>string</td>
<td><strong>Required</strong> The OAuth2 response type. Currently only <code class="prettyprint">code</code> is supported.</td>
</tr>
</tbody></table></li>
<li><p>Exchange the authorization code for an access token</p>

<p>After the user has authorized the application, they will be redirected
to the <code class="prettyprint">redirect_uri</code>, with a <code class="prettyprint">code</code> param. This param can be exchanged
for an access token:</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">POST https://kepler.example.com/auth/token</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">client_id</code></td>
<td>integer</td>
<td><strong>Required</strong> The app&rsquo;s id</td>
</tr>
<tr>
<td><code class="prettyprint">client_secret</code></td>
<td>string</td>
<td><strong>Required</strong> The app&rsquo;s secret key</td>
</tr>
<tr>
<td><code class="prettyprint">code</code></td>
<td>string</td>
<td><strong>Required</strong> The OAuth2 access code received after a successful authorization.</td>
</tr>
</tbody></table></li>
</ol>

<h2 id="http-basic-auth">HTTP Basic Auth</h2>
<pre class="highlight shell"><code>curl -u user@example.com https://api.meruscase.com/v1/users/me
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">Merus</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'merus'</span><span class="p">),</span>
    <span class="nx">merus</span> <span class="o">=</span> <span class="nx">Merus</span><span class="p">(</span><span class="s1">'user@example.com'</span><span class="p">,</span> <span class="s1">'opensesame'</span><span class="p">);</span>

<span class="nx">merus</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">me</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firm_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_type_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-07-19T10:35:08.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-07-19T15:04:04.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The API can also be accessed with HTTP basic auth, using a user&rsquo;s credentials. This is provided for scripting and debugging purposes.</p>

<aside class="warning">
Third party applications <b>must not ask for or collect Merus credentials</b>. Users should be directed through the OAuth flow.
</aside>

<h2 id="rate-limiting">Rate Limiting</h2>

<p>The API limits apps to 1000 requests per user per hour.</p>

<p>And app can observe the rate limit, remaining quota, and reset time in any API request&rsquo;s response headers.</p>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-Ratelimit-Limit</span><span class="p">:</span> <span class="s">1000</span>
<span class="na">X-Ratelimit-Remaining</span><span class="p">:</span> <span class="s">998</span>
<span class="na">X-Ratelimit-Reset</span><span class="p">:</span> <span class="s">1433196000</span>
</code></pre>

<h1 id="apps">Apps</h1>

<h2 id="creating-an-app">Creating an App</h2>
<pre class="highlight shell"><code>curl -u hello@example.com <span class="se">\</span>
  -d <span class="nv">name</span><span class="o">=</span><span class="s2">"Hello World"</span> <span class="se">\</span>
  -d <span class="nv">redirect_uri</span><span class="o">=</span>https://example.com/auth/merus/callback <span class="se">\</span>
  https://api.meruscase.com/v1/apps
</code></pre>
<pre class="highlight javascript"><code>
<span class="nx">merus</span><span class="p">.</span><span class="nx">apps</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello World"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b827e00a-5924-42b4-a59f-2dccc557e68b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/auth/kepler/callback"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="request">Request</h3>

<p><code class="prettyprint">POST /v1/apps</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">redirect_uri</code></td>
<td>string</td>
<td><strong>Required</strong> The application&rsquo;s callback URL</td>
</tr>
<tr>
<td><code class="prettyprint">name</code></td>
<td>string</td>
<td>The application&rsquo;s display name</td>
</tr>
</tbody></table>

<h1 id="casefiles">CaseFiles</h1>

<h2 id="searching-for-a-casefile">Searching for a casefile</h2>
<pre class="highlight shell"><code>curl -H <span class="s1">'Authorization: Bearer 06d83c40-c22f-482c-ae30-31d10fd8e9e6'</span> <span class="se">\</span>
  https://api.meruscase.com/v1/casefiles/search?name<span class="o">=</span>ADJ2001
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s1">'ADJ2001'</span><span class="p">};</span>
<span class="nx">merus</span><span class="p">.</span><span class="nx">casefiles</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>Searches for casefiles that match the given query parameters. Search parameters
use an implicit wildcard, so a parameter with a value of &ldquo;ABC&rdquo; will match a
casefile with &ldquo;ABC123&rdquo;.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code></td>
<td>string</td>
<td>The casefile&rsquo;s name</td>
</tr>
</tbody></table>

<h2 id="adding-a-document">Adding a document</h2>
<pre class="highlight shell"><code>curl -H <span class="s1">'Authorization: Bearer 06d83c40-c22f-482c-ae30-31d10fd8e9e6'</span> <span class="se">\</span>
  -F <span class="s1">'file=@doc.rtf;type=application/rtf'</span>
  https://api.meruscase.com/v1/casefiles/100/documents
</code></pre>

<p>Adds a document to the casefile.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">file</code></td>
<td>file</td>
<td>The file contents</td>
</tr>
</tbody></table>

<h3 id="supported-document-types">Supported Document Types</h3>

<p>The following MIME types are supported:</p>

<ul>
<li><code class="prettyprint">application/pdf</code></li>
<li><code class="prettyprint">application/vnd.openxmlformats-officedocument.wordprocessingml.document</code></li>
<li><code class="prettyprint">application/msword</code></li>
<li><code class="prettyprint">application/wordperfect</code></li>
<li><code class="prettyprint">application/rtf</code></li>
<li><code class="prettyprint">text/plain</code></li>
</ul>

<h1 id="documents">Documents</h1>

<h2 id="adding-a-document">Adding a document</h2>
<pre class="highlight shell"><code>curl -H <span class="s1">'Authorization: Bearer 06d83c40-c22f-482c-ae30-31d10fd8e9e6'</span> <span class="se">\</span>
  -F <span class="s1">'file=@doc.pdf;type=application/pdf'</span>
  https://api.meruscase.com/v1/documents
</code></pre>

<p>Adds a document to the firm&rsquo;s document index.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">file</code></td>
<td>file</td>
<td>The file contents</td>
</tr>
</tbody></table>

<h3 id="supported-document-types">Supported Document Types</h3>

<p>The following MIME types are supported:</p>

<ul>
<li><code class="prettyprint">application/pdf</code></li>
</ul>

<h1 id="users">Users</h1>

<h2 id="getting-the-current-user">Getting the current user</h2>
<pre class="highlight shell"><code>curl -H <span class="s1">'Authorization: Bearer 06d83c40-c22f-482c-ae30-31d10fd8e9e6'</span> <span class="se">\</span>
  https://api.meruscase.com/v1/users/me
</code></pre>
<pre class="highlight javascript"><code><span class="nx">merus</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">me</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-user"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Gets information on the current user</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET /v1/users/me</code></p>

<h2 id="getting-a-list-of-users">Getting a list of users</h2>
<pre class="highlight shell"><code>curl -H <span class="s1">'Authorization: Bearer 06d83c40-c22f-482c-ae30-31d10fd8e9e6'</span> <span class="se">\</span>
  https://api.meruscase.com/v1/users
</code></pre>
<pre class="highlight javascript"><code><span class="nx">merus</span><span class="p">.</span><span class="nx">users</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight json"><code><span class="p">[{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-user"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other-test-user"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-04-14T17:47:20.000Z"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p>Gets information on all visible users</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET /v1/users</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
